%%% Copyright 2021 Ian Jackson and contributors
%%% SPDX-License-Identifier: MIT
%%% There is NO WARRANTY.

\documentclass[a4paper]{memoir}

\usepackage[british]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{pslatex}
\usepackage{palatino}

\usepackage{color}

\definecolor{darkgreen}{rgb}{0.0, 0.5, 0.0}
\definecolor{darkblue}{rgb}{0.0, 0.0, 0.6}

\errorcontextlines=\maxdimen

\usepackage
  [bookmarks = true, bookmarksnumbered = true, bookmarksdepth = 3,
   colorlinks = true, linkcolor = darkgreen, citecolor = darkgreen,
   urlcolor = darkblue, breaklinks = true]
  {hyperref}

\isopage[10]
\fixthelayout

\makechapterstyle{sans}
  {\renewcommand{\chapnamefont}{\normalfont\huge\sffamily\bfseries}
   \renewcommand{\chapnumfont}{\normalfont\huge\sffamily\bfseries}
   \renewcommand{\chaptitlefont}{\normalfont\Huge\sffamily\bfseries}}
\chapterstyle{sans}
\setsecheadstyle{\Large\sffamily\bfseries}
\setsubsecheadstyle{\large\sffamily\bfseries}
\setsubsubsecheadstyle{\sffamily\bfseries}
\setparaheadstyle{\sffamily\bfseries}
\setsubparaheadstyle{\sffamily\bfseries}
\setaftersubsecskip{-1em}
\maxsecnumdepth{subsection}

\nonzeroparskip
\setlength{\parindent}{0pt}

\hyphenpenalty=1000 \sloppy \raggedbottom

\newenvironment{longtable}[2][]
  {\begin{center}%
   \let\endhead=\relax
   \begin{tabular}{#2}}
  {\end{tabular}\end{center}}

\title{DRAFT -- Rust for the Polyglot Programmer}
\author{Ian Jackson and contributors}

\makeatletter
\let\@latex@texttt=\texttt
\def\texttt{\ifx\protect\@typeset@protect \expandafter\@texttt@i
  \else \expandafter\@latex@texttt \fi}
\def\q@end{\q@end}
\def\@texttt@i#1{\@latex@texttt{\addhyph@{#1}}}
\def\addhyph@#1{\addhyph@i{::}{#1}}
\def\addhyph@i#1#2{%
  \def\addhyph@ii##1#1##2\q@end{%
    ##1%
    \def\temp@{##2}%
    \ifx\temp@\empty\else #1\textrm{\-}\def\next@{\addhyph@ii##2\q@end}%
    \expandafter\next@\fi%
  }%
  \addhyph@ii#2\relax#1\q@end%
}

\begin{document}

\pagestyle{plain}
\frontmatter

\begin{titlingpage}
  \maketitle
  \vfill
  \input{precontents}
\end{titlingpage}

\tableofcontents

\pagestyle{headings}
\mainmatter
\include{intro}
\include{syntax}
\include{types}
\include{ownership}
\include{traits}
\include{safety}
\include{errors}
\include{macros}
\include{async}
\include{ffi}
\include{rustdoc}
\include{stability}
\include{cargo}
\include{libs}

\backmatter
\include{colophon}

\end{document}
